 运行脚本
```she
python main.py
```



将patch文件一行一行处理，找出`***`开头的是打补丁函数所在的文件名，`*** 12,34 ****`是补丁修改的行号信息，取出文件名，起始行号，结束行号。一个patch文件中可能有多处修改，每一个修改合成一个dict，append到patches的list中。

```python
处理补丁后
    [
    {
        "file": xx,
        "start": xx,
        "end": xx,
    },
    {
    
    },
    ...
    ]
```



函数处理类似，主要找出函数名、函数所在的文件、所在文件的起始结束行号，但用字典来存储，文件名在最高级，便于用get()取出所要文件内的函数列表。

```python
处理函数后
    {"file.c":[
        {
            "name": "func1",
            "start": 250,
            "end": 450,
        },
        {
            "name": "func2",
            "start": 555,
            "end": 666,
        },
    ]
    "file2.h":[
        ......
    ]}
```



main函数中对每patches中每一个dict进行遍历，读文件名，根据文件名找到functions中的函数list，排序，二分找到对应的位置（函数），counter+1




>上下文格式的diff
>
>上个世纪80年代初，加州大学伯克利分校推出BSD版本的Unix时，觉得diff的显示结果太简单，最好加入上下文，便于了解发生的变动。因此，推出了上下文格式的diff。
> 
>它的使用方法是加入c参数（代表context）。
> ```sh
>$ diff -c f1 f2
> ```
> 
> 显示结果如下：
> ```sh
>*** f1 2012-08-29 16:45:41.000000000 +0800
> 　　--- f2 2012-08-29 16:45:51.000000000 +0800
> 　　***************
> 　　*** 1,7 ****
> 　　 a
> 　　 a
> 　　 a
> 　　!a
> 　　 a
> 　　 a
> 　　 a
> 　　--- 1,7 ----
> 　　 a
> 　　 a
> 　　 a
> 　　!b
> 　　 a
> 　　 a
> 　　 a
> ```
> 
> 
> 这个结果分成四个部分。
>
>第一部分的两行，显示两个文件的基本情况：文件名和时间信息。
> ```sh
>*** f1 2012-08-29 16:45:41.000000000 +0800
> 　　 --- f2 2012-08-29 16:45:51.000000000 +0800
> ```
>     
> 
> 
>"***"表示变动前的文件，"---"表示变动后的文件。
> 　　
>第二部分是15个星号，将文件的基本情况与变动内容分割开。
> 
>```sh
> 　　***************
>```
> 
> 
> 第三部分显示变动前的文件，即f1。
>```sh
>　　*** 1,7 ****
> 　　 a
> 　　 a
> 　　 a
> 　　!a
> 　　 a
> 　　 a
> 　　 a
> ```
> 
> 
> 这时不仅显示发生变化的第4行，还显示第4行的前面三行和后面三行，因此一共显示7行。所以，前面的"*** 1,7 ****"就表示，从第1行开始连续7行。
>
>另外，文件内容的每一行最前面，还有一个标记位。如果为空，表示该行无变化；如果是感叹号（!），表示该行有改动；如果是减号（-），表示该行被删除；如果是加号（+），表示该行为新增。
> 
>第四部分显示变动后的文件，即f2。
> ```sh
>　　--- 1,7 ----
> 　　 a
> 　　 a
> 　　 a
> 　　!b
> 　　 a
> 　　 a
> 　　 a
> ```
> 
> 除了变动行（第4行）以外，也是上下文各显示三行，总共显示7行
> 

